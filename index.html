<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aliani</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            overflow-x: hidden;
        }

        /* Navigation styles */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            z-index: 1000;
            color: white;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
        }

        /* Dropdown styles */
        .dropdown {
            position: relative;
        }

        .dropdown > a {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .dropdown-arrow {
            display: inline-block;
            margin-left: 5px;
            font-size: 10px;
            transition: transform 0.3s;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            min-width: 150px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            margin-top: 10px;
            border-radius: 4px;
            overflow: hidden;
            text-align: center;
        }

        .dropdown-content a {
            padding: 10px 15px;
            display: block;
            transition: background-color 0.3s;
        }

        .dropdown-content a:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .dropdown-content.show {
            display: block;
        }

        .dropdown-arrow.rotate {
            transform: rotate(180deg);
        }

        /* Main container structure */
        #app-container {
            width: 100%;
            height: 100vh;
            position: fixed;
            top: 60px; /* Account for navbar */
            left: 0;
            display: flex;
            flex-direction: column;
        }

        /* Portrait layout (default for mobile) */
        .image-half {
            width: 100%;
            height: 30%;
            position: relative;
            overflow: hidden;
            background-color: #000;
            z-index: 1;
        }

        .scrollable-half {
            width: 100%;
            height: 70%;
            overflow-y: auto;
            background-color: white;
            position: relative;
        }
        
        /* Fade effect for portrait mode */
        .image-half::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background: linear-gradient(to bottom, rgba(0,0,0,0), white);
            z-index: 5;
        }
        
        .scrollable-half::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background: linear-gradient(to top, rgba(255,255,255,0), white);
            z-index: 5;
            pointer-events: none;
        }

        /* Landscape layout */
        @media (orientation: landscape) {
            #app-container {
                flex-direction: row;
            }

            .image-half, .scrollable-half {
                width: 50%;
                height: calc(100vh - 60px);
            }
            
            /* Reset portrait fade and add landscape fade */
            .image-half::after {
                content: '';
                width: 40px;
                height: 100%;
                top: 0;
                bottom: auto;
                right: 0;
                left: auto;
                background: linear-gradient(to right, rgba(0,0,0,0), white);
            }
            
            .scrollable-half::before {
                content: '';
                width: 40px;
                height: 100%;
                top: 0;
                left: 0;
                background: linear-gradient(to left, rgba(255,255,255,0), white);
            }
        }

        /* Image styling */
        .image-container {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            user-select: none;
            pointer-events: none;
        }

        .image.active {
            opacity: 1;
        }
        
        /* Overlay to capture mouse events */
        .image-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            cursor: default;
        }
        
        /* Project buttons container */
        .project-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .project-button {
            padding: 10px 20px;
            background-color: #333;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }

        .project-button:hover {
            background-color: #555;
        }
        
        .project-button.active {
            background-color: #555;
            box-shadow: 0 0 5px rgba(0,0,0,0.5);
        }
        
        /* Project descriptions */
        .project-description {
            margin-top: 20px;
            padding: 15px;
            border-radius: 4px;
            background-color: #f5f5f5;
            border-left: 4px solid #333;
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .project-description.visible {
            display: block;
            opacity: 1;
        }

        /* Content styling */
        .section, .subsection {
            min-height: 100vh;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .section-content {
            max-width: 800px;
            margin: 0 auto;
        }

        h2 {
            font-size: 32px;
            margin-bottom: 20px;
        }

        h3 {
            font-size: 24px;
            margin-bottom: 15px;
        }

        p {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        button {
            padding: 12px 24px;
            background-color: #333;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }

        /* Media queries - combined for efficiency */
        @media (max-width: 768px) {
            .navbar { padding: 0 10px; }
            .logo { font-size: 20px; }
            .nav-links { gap: 15px; }
            .section, .subsection { 
                padding: 30px 20px; 
                min-height: 100%; 
            }
            h2 { font-size: 28px; }
            h3 { font-size: 22px; }
            p { font-size: 16px; }
            .dropdown-content {
                position: absolute;
                left: 0;
                transform: none;
                width: 200px;
            }
        }
        
        @media (max-width: 480px) {
            .navbar { padding: 0 8px; }
            .logo { font-size: 18px; }
            .nav-links { gap: 12px; }
            .nav-links a, .dropdown > a { font-size: 14px; }
            .dropdown-content { width: 180px; }
            .dropdown-content a {
                padding: 10px;
                text-align: left;
            }
        }
    </style>
</head>
<body>
    <!-- Fixed navbar -->
    <div class="navbar">
        <div class="logo">PORTFOLIO - <span style="color:hsla(0, 0%, 70%);">ALIA</span>NI</div>
        <div class="nav-links">
            <a href="#home">Home</a>
            <div class="dropdown">
                <a href="#work" class="dropdown-trigger">Work <span class="dropdown-arrow">â–¼</span></a>
                <div class="dropdown-content">
                    <a href="#renders">Renders</a>
                    <a href="#3d">3D Modeling</a>
                    <a href="#drafting">Drafting</a>
                    <a href="#video">Video Editing</a>
                    <a href="#gis">GIS</a>
                </div>
            </div>
            <a href="#contact">Contact</a>
        </div>
    </div>

    <!-- Main container with fixed positioning -->
    <div id="app-container">
        <!-- Fixed image half -->
        <div class="image-half">
            <div class="image-container">
                <!-- Main sections -->
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/abt%20(1).jpg" alt="Home" class="image active" data-section="home" loading="lazy" draggable="false">
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/abt%20(2).jpg" alt="Work" class="image" data-section="work" loading="lazy" draggable="false">
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/abt%20(3).jpg" alt="Contact" class="image" data-section="contact" loading="lazy" draggable="false">
                
                <!-- Work subsections -->
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/Renders%20(1).jpg" alt="Renders" class="image" data-section="renders" loading="lazy" draggable="false">
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/3d.jpg" alt="3D" class="image" data-section="3d" loading="lazy" draggable="false">
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/Technical%20(1).jpg" alt="Drafting" class="image" data-section="drafting" loading="lazy" draggable="false">
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/Videos%20(1).jpg" alt="Video Editing" class="image" data-section="video" loading="lazy" draggable="false">
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/GIS.jpg" alt="GIS" class="image" data-section="gis" loading="lazy" draggable="false">
                
                <!-- Project-specific images -->
                <!-- Renders projects -->
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/Renders%20(2).jpg" alt="Renders Project 1" class="image" data-project="renders-1" loading="lazy" draggable="false">
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/Renders%20(3).jpg" alt="Renders Project 2" class="image" data-project="renders-2" loading="lazy" draggable="false">
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/Renders%20(4).jpg" alt="Renders Project 3" class="image" data-project="renders-3" loading="lazy" draggable="false">
                
                <!-- 3D projects -->
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/3D%20(2).JPG" alt="3D Project 1" class="image" data-project="3d-1" loading="lazy" draggable="false">
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/3D%20(3).jpg" alt="3D Project 2" class="image" data-project="3d-2" loading="lazy" draggable="false">
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/3d.jpg" alt="3D Project 3" class="image" data-project="3d-3" loading="lazy" draggable="false">
                
                <!-- Drafting projects -->
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/Technical%20(2).jpg" alt="Drafting Project 1" class="image" data-project="drafting-1" loading="lazy" draggable="false">
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/Technical%20(3).jpg" alt="Drafting Project 2" class="image" data-project="drafting-2" loading="lazy" draggable="false">
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/Technical%20(4).jpg" alt="Drafting Project 3" class="image" data-project="drafting-3" loading="lazy" draggable="false">
                
                <!-- Video projects -->
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/Videos%20(2).jpg" alt="Video Project 1" class="image" data-project="video-1" loading="lazy" draggable="false">
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/Videos%20(3).jpg" alt="Video Project 2" class="image" data-project="video-2" loading="lazy" draggable="false">
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/Videos%20(4).jpg" alt="Video Project 3" class="image" data-project="video-3" loading="lazy" draggable="false">
                
                <!-- GIS projects -->
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/GIS_1.jpg" alt="GIS Project 1" class="image" data-project="gis-1" loading="lazy" draggable="false">
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/GIS_2.jpg" alt="GIS Project 2" class="image" data-project="gis-2" loading="lazy" draggable="false">
                <img src="https://raw.githubusercontent.com/aliani93/Portfolio/refs/heads/main/Images/GIS_3.png" alt="GIS Project 3" class="image" data-project="gis-3" loading="lazy" draggable="false">
                
                <div class="image-overlay"></div>
            </div>
        </div>

        <!-- Scrollable content half -->
        <div class="scrollable-half">
            <!-- Home Section -->
            <div id="home" class="section" data-section="home">
                <div class="section-content">
                    <h2>Welcome</h2>
                    <p>Hey there, I'm a professional designer specializing in various digital and architectural visualization techniques. My portfolio showcases a range of work from 3D modeling to technical drafting and GIS mapping.</p>
                    <p>With over 10 years of experience, I've worked with clients across multiple industries to bring their visions to life through compelling visual storytelling and technical precision.</p>
                    <button>About Me</button>
                </div>
            </div>

            <!-- Work Section -->
            <div id="work" class="section" data-section="work">
                <div class="section-content">
                    <h2>My Work</h2>
                    <p>Below you'll find samples of my professional work across different disciplines. Each category demonstrates my expertise in specific areas of visual and technical design.</p>
                    <p>Scroll down to explore each category and see examples of my projects.</p>
                </div>
            </div>

            <!-- Work Subsections -->
            <div id="renders" class="subsection" data-section="renders">
                <div class="section-content">
                    <h3>Architectural Renders</h3>
                    <p>Photorealistic architectural visualizations created using industry-leading rendering software. These projects showcase interior and exterior spaces with attention to lighting, materials, and environmental details.</p>
                    <p>Each render is meticulously crafted to convey the design intent while creating an emotional connection with the viewer.</p>
                    <div class="project-buttons">
                        <button class="project-button" data-project="renders-1">Project 1</button>
                        <button class="project-button" data-project="renders-2">Project 2</button>
                        <button class="project-button" data-project="renders-3">Project 3</button>
                    </div>
                    <div class="project-description" id="project-description-renders"></div>
                </div>
            </div>

            <div id="3d" class="subsection" data-section="3d">
                <div class="section-content">
                    <h3>3D Modeling</h3>
                    <p>Detailed 3D models created for various applications including product design, architectural visualization, and digital assets. My modeling work emphasizes accuracy, optimized geometry, and attention to detail.</p>
                    <p>I work with multiple modeling platforms to create assets that meet both technical and aesthetic requirements.</p>
                    <div class="project-buttons">
                        <button class="project-button" data-project="3d-1">Project 1</button>
                        <button class="project-button" data-project="3d-2">Project 2</button>
                        <button class="project-button" data-project="3d-3">Project 3</button>
                    </div>
                    <div class="project-description" id="project-description-3d"></div>
                </div>
            </div>

            <div id="drafting" class="subsection" data-section="drafting">
                <div class="section-content">
                    <h3>Technical Drafting</h3>
                    <p>Precise technical drawings and documentation for architectural and engineering applications. My drafting work follows industry standards and best practices to ensure accuracy and clarity.</p>
                    <p>From construction documents to detailed drawings, I provide comprehensive technical documentation for projects of all scales.</p>
                    <div class="project-buttons">
                        <button class="project-button" data-project="drafting-1">Project 1</button>
                        <button class="project-button" data-project="drafting-2">Project 2</button>
                        <button class="project-button" data-project="drafting-3">Project 3</button>
                    </div>
                    <div class="project-description" id="project-description-drafting"></div>
                </div>
            </div>

            <div id="video" class="subsection" data-section="video">
                <div class="section-content">
                    <h3>Video Editing</h3>
                    <p>Professional video editing services for architectural walkthroughs, product presentations, and promotional content. My video work combines technical precision with narrative storytelling.</p>
                    <p>I specialize in creating compelling visual narratives that effectively communicate design concepts and project features.</p>
                    <div class="project-buttons">
                        <button class="project-button" data-project="video-1">Project 1</button>
                        <button class="project-button" data-project="video-2">Project 2</button>
                        <button class="project-button" data-project="video-3">Project 3</button>
                    </div>
                    <div class="project-description" id="project-description-video"></div>
                </div>
            </div>

            <div id="gis" class="subsection" data-section="gis">
                <div class="section-content">
                    <h3>GIS Mapping</h3>
                    <p>Geographic Information System (GIS) mapping and analysis for urban planning, environmental studies, and spatial data visualization. My GIS work provides clear insights into complex spatial relationships.</p>
                    <p>I create custom maps and spatial analyses that support informed decision-making and effective communication of geographic data.</p>
                    <div class="project-buttons">
                        <button class="project-button" data-project="gis-1">Project 1</button>
                        <button class="project-button" data-project="gis-2">Project 2</button>
                        <button class="project-button" data-project="gis-3">Project 3</button>
                    </div>
                    <div class="project-description" id="project-description-gis"></div>
                </div>
            </div>

            <!-- Contact Section -->
            <div id="contact" class="section" data-section="contact">
                <div class="section-content">
                    <h2>Contact Me</h2>
                    <p>Interested in working together? I'm currently available for freelance projects and consulting opportunities. Get in touch to discuss how I can help bring your vision to life.</p>
                    <p>Email: contact@example.com<br>Phone: (123) 456-7890</p>
                    <button>Send Message</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Cache DOM elements
            const scrollableHalf = document.querySelector('.scrollable-half');
            const dropdown = document.querySelector('.dropdown');
            const dropdownTrigger = document.querySelector('.dropdown-trigger');
            const dropdownContent = document.querySelector('.dropdown-content');
            const dropdownArrow = document.querySelector('.dropdown-arrow');
            const images = document.querySelectorAll('.image');
            const sections = document.querySelectorAll('.section, .subsection');
            const navLinks = document.querySelectorAll('.nav-links a');
            const projectDescriptions = document.querySelectorAll('.project-description');
            const projectButtons = document.querySelectorAll('.project-button');
            
            // State variables
            let currentSection = null;
            let currentProject = null;
            let scrollTriggered = true;
            let scrollTimeout;
            let resizeTimeout;
            
            // Project descriptions content
            const projectContent = {
                // Renders projects
                'renders-1': 'This residential visualization project focused on creating a photorealistic representation of a modern coastal home. I worked closely with the architect to capture the interplay of natural light and the building's unique materials. The render highlights the seamless indoor-outdoor connection that was central to the design concept.',
                'renders-2': 'For this commercial office visualization, I created a series of interior renderings showcasing the open plan workspace and collaborative areas. Special attention was paid to lighting conditions at different times of day, demonstrating how the space transforms from morning to evening.',
                'renders-3': 'This urban planning visualization involved creating a birds-eye perspective of a proposed mixed-use development. The render integrates the new structure with existing buildings and emphasizes pedestrian circulation patterns and green spaces to help stakeholders understand the project's impact.',
                
                // 3D modeling projects
                '3d-1': 'This complex parametric modeling project required creating a customizable 3D model for a furniture system with variable dimensions. The model was designed to automatically adjust all components while maintaining structural integrity, allowing for rapid iteration and customization.',
                '3d-2': 'For this product design project, I developed a detailed 3D model of a consumer electronics device with over 300 individual components. The model included internal mechanics and was used for both visualization and manufacturing documentation.',
                '3d-3': 'This architectural modeling project involved creating a detailed 3D representation of a historic building for conservation planning. Using photogrammetry and manual modeling techniques, I captured intricate details of ornate facades and interior spaces.',
                
                // Drafting projects
                'drafting-1': 'This set of construction documents included over 50 detailed drawings for a commercial renovation project. I coordinated with structural, mechanical, and electrical engineers to ensure all systems were properly integrated while maintaining the design intent.',
                'drafting-2': 'For this residential project, I created comprehensive permit drawings including site plans, floor plans, elevations, sections, and detailed areas. The documentation helped secure building approval while providing clear guidance for construction.',
                'drafting-3': 'This technical drafting project involved creating detailed assembly instructions for a modular construction system. The drawings included exploded axonometric views, connection details, and step-by-step installation sequences.',
                
                // Video projects
                'video-1': 'This architectural walkthrough animation guides viewers through a proposed cultural center, highlighting key spaces and the visitor experience. The video combines flythrough sequences with atmospheric lighting to communicate the spatial qualities.',
                'video-2': 'For this product launch video, I created a dynamic presentation showcasing the product's features and benefits. The video includes animated diagrams, motion graphics, and lifestyle footage to create a compelling narrative.',
                'video-3': 'This construction sequence animation visualizes the phased implementation of a large-scale infrastructure project. The video helped stakeholders understand the construction timeline and potential impacts on surrounding areas.',
                
                // GIS projects
                'gis-1': 'This urban analysis mapping project examined transportation patterns and accessibility within a metropolitan area. Using GIS tools, I created a series of maps visualizing public transit coverage, walkability scores, and areas with limited mobility options.',
                'gis-2': 'For this environmental impact study, I developed maps analyzing potential habitat disruption from a proposed development. The GIS analysis integrated multiple data sources to identify sensitive ecological zones and suggest mitigation strategies.',
                'gis-3': 'This demographic mapping project visualized population data across multiple variables for urban planning purposes. The maps revealed patterns in income distribution, housing density, and access to community resources across different neighborhoods.'
            };
            
            // Utility functions
            const debounce = (func, delay) => {
                let timeout;
                return function() {
                    const context = this;
                    const args = arguments;
                    clearTimeout(timeout);
                    timeout = setTimeout(() => func.apply(context, args), delay);
                };
            };
            
            // Hide all project descriptions
            const hideAllProjectDescriptions = () => {
                projectDescriptions.forEach(desc => {
                    desc.classList.remove('visible');
                });
                projectButtons.forEach(btn => {
                    btn.classList.remove('active');
                });
            };
            
            // Show project description
            const showProjectDescription = (projectId) => {
                // Extract the category from the project ID (e.g., 'renders' from 'renders-1')
                const category = projectId.split('-')[0];
                const descriptionElement = document.getElementById(`project-description-${category}`);
                
                if (descriptionElement) {
                    // Update content and show description
                    descriptionElement.textContent = projectContent[projectId] || '';
                    descriptionElement.classList.add('visible');
                    
                    // Highlight active button
                    const activeButton = document.querySelector(`.project-button[data-project="${projectId}"]`);
                    if (activeButton) {
                        activeButton.classList.add('active');
                    }
                }
            };
            
            // Image protection
            document.addEventListener('contextmenu', e => {
                if (e.target.closest('.image-half')) e.preventDefault();
            });
            
            // Block common keyboard shortcuts
            document.addEventListener('keydown', e => {
                if ((e.ctrlKey && ['s', 'S', 'u', 'U'].includes(e.key)) || 
                    e.key === 'F12' || 
                    (e.ctrlKey && e.shiftKey && ['i', 'I'].includes(e.key))) {
                    e.preventDefault();
                }
            });
            
            // Toggle dropdown
            dropdownTrigger.addEventListener('click', e => {
                e.preventDefault();
                dropdownContent.classList.toggle('show');
                dropdownArrow.classList.toggle('rotate');
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', e => {
                if (!e.target.closest('.dropdown') && dropdownContent.classList.contains('show')) {
                    dropdownContent.classList.remove('show');
                    dropdownArrow.classList.remove('rotate');
                }
            });
            
            // Handle project button clicks - event delegation
            document.addEventListener('click', e => {
                const projectButton = e.target.closest('.project-button');
                if (!projectButton) return;
                
                const projectId = projectButton.dataset.project;
                
                // Save current section before changing to project
                if (currentSection && !currentProject) {
                    scrollTriggered = false;
                }
                
                // Update image display
                images.forEach(img => img.classList.remove('active'));
                
                const projectImage = document.querySelector(`.image[data-project="${projectId}"]`);
                if (projectImage) {
                    projectImage.classList.add('active');
                    currentProject = projectId;
                    
                    // Hide all descriptions first
                    hideAllProjectDescriptions();
                    
                    // Then show the selected project description
                    showProjectDescription(projectId);
                }
            });
            
            // Check which section is in view
            const checkVisibleSection = () => {
                // Skip if we're viewing a project and scroll wasn't user-triggered
                if (currentProject && !scrollTriggered) {
                    scrollTriggered = true;
                    return;
                }
                
                // Reset project view when scrolling to a new section
                if (currentProject) {
                    const previousSection = currentSection;
                    
                    // Determine if we're actually scrolling to a new main section
                    const scrollTop = scrollableHalf.scrollTop;
                    const viewportHeight = scrollableHalf.clientHeight;
                    const scrollHalfTop = scrollableHalf.getBoundingClientRect().top;
                    
                    // Find most visible section
                    let mostVisibleSection = null;
                    let maxVisibleAmount = 0;
                    
                    sections.forEach(section => {
                        const rect = section.getBoundingClientRect();
                        const sectionTop = rect.top + scrollTop - scrollHalfTop;
                        const sectionBottom = sectionTop + rect.height;
                        
                        // Calculate visible portion
                        const visibleTop = Math.max(scrollTop, sectionTop);
                        const visibleBottom = Math.min(scrollTop + viewportHeight, sectionBottom);
                        const visibleAmount = Math.max(0, visibleBottom - visibleTop);
                        
                        if (visibleAmount > maxVisibleAmount) {
                            maxVisibleAmount = visibleAmount;
                            mostVisibleSection = section;
                        }
                    });
                    
                    if (mostVisibleSection && mostVisibleSection.dataset.section !== previousSection) {
                        currentProject = null;
                        hideAllProjectDescriptions();
                    }
                }
                
                const scrollTop = scrollableHalf.scrollTop;
                const viewportHeight = scrollableHalf.clientHeight;
                const scrollHalfTop = scrollableHalf.getBoundingClientRect().top;
                
                // Find most visible section
                let mostVisibleSection = null;
                let maxVisibleAmount = 0;
                
                sections.forEach(section => {
                    const rect = section.getBoundingClientRect();
                    const sectionTop = rect.top + scrollTop - scrollHalfTop;
                    const sectionBottom = sectionTop + rect.height;
                    
                    // Calculate visible portion
                    const visibleTop = Math.max(scrollTop, sectionTop);
                    const visibleBottom = Math.min(scrollTop + viewportHeight, sectionBottom);
                    const visibleAmount = Math.max(0, visibleBottom - visibleTop);
                    
                    if (visibleAmount > maxVisibleAmount) {
                        maxVisibleAmount = visibleAmount;
                        mostVisibleSection = section;
                    }
                });
                
                // Update active image if section changed
                if (mostVisibleSection) {
                    const sectionId = mostVisibleSection.dataset.section;
                    
                    if (currentSection !== sectionId) {
                        currentSection = sectionId;
                        
                        const activeImage = document.querySelector(`.image[data-section="${sectionId}"]`);
                        if (activeImage) {
                            images.forEach(img => img.classList.remove('active'));
                            activeImage.classList.add('active');
                        }
                    }
                }
            };
            
            // Event listeners with debouncing
            scrollableHalf.addEventListener('scroll', () => {
                scrollTriggered = true;
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(checkVisibleSection, 50);
            });
            
            window.addEventListener('resize', debounce(checkVisibleSection, 100));
            window.addEventListener('orientationchange', debounce(checkVisibleSection, 200));
            
            // Navigation
            navLinks.forEach(anchor => {
                anchor.addEventListener('click', e => {
                    if (anchor.classList.contains('dropdown-trigger')) return;
                    
                    e.preventDefault();
                    
                    const targetId = anchor.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);
                    
                    if (targetElement) {
                        // Close dropdown if open
                        dropdownContent.classList.remove('show');
                        dropdownArrow.classList.remove('rotate');
                        
                        // Reset project view
                        currentProject = null;
                        hideAllProjectDescriptions();
                        
                        // Scroll to target
                        scrollableHalf.scrollTo({
                            top: targetElement.offsetTop,
                            behavior: 'smooth'
                        });
                    }
                });
            });
            
            // Initial check
            setTimeout(checkVisibleSection, 100);
        });
    </script>
</body>
</html>
